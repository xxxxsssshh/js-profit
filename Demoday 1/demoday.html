<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
            <body>
                <title>Demoday</title>
                    <script>

                        "use strict"

                        // Приветствие

                        alert("DEMODAY\nВ этом задании будет сгенерирована прямоугольная матрица S из случайных значений в диапазоне от -10 до 10.\nРазмер\
 матрицы будет задан пользователем. Далее на основе этой матрицы будут составлены другие матрицы по определенным условиям.");
                        alert("БУДЬТЕ ВНИМАТЕЛЬНЫ!\nДля хорошего восприятия матриц выставлено ограничение - размер не может быть более 10 столбцов и строк!\
\nПри вводе некорректного значения программа не запустится, для продолжения работы программу нужно будет перезапустить!");
                        
                        // Ввод значений

                        let m = +prompt("Введите количество строк для генерации матрицы S:");
                        let n = +prompt("Введите количество столбцов для генерации матрицы S:");

                        // Проверка корректности значений + ограничение по размеру матрицы - не более 10 столбцов и строк

                        if (m <= 0 || n <= 0 || Number.isNaN(m) == true || Number.isNaN(n) == true || m * n % 1 !== 0 || m * n > 100) {
                            alert("Задано некорректное значение!\nПерезапустите программу!");
                            localtion.close();
                        }

                        // Создание пустых массивов для дальнейшей работы

                        let numberMatrix = [];
                        let matrixR = [];
                        let martixT = [];

                        // Заполнение числовой матрицы случайными значениями
   
                        for (let i = 0; i < m; i++) {
                            numberMatrix[i] = [];
                            for (let j = 0; j < n; j++) {
                                numberMatrix[i][j] = Math.round((Math.random() - Math.random()) * 10);
                                if (numberMatrix[i][j] == -0) {
                                    numberMatrix[i][j] = 0;
                                }
                            }
                        }

                        // Вывод результата по матрице S

                        let resultS = "";
                        for (let i = 0; i < m; i++) {
                            resultS += numberMatrix[i].join() + "<br>";
                        }
   
                        document.write(`Создана матрица из ${m * n} значений. (${m} строк и ${n} столбцов):<br> ${resultS}<br>`);
                        alert("Матрица S создана!\nСледующим шагом будет создана числовая матрица T на основе матрицы S, где будут соблюдены следующие условия:\n- если в\
 числовой матрице S есть значение 1, в матрице Т это значение будет изменено на -5\n- если в числовой матрице S есть значение -3, то это значение в матрице\
 T будет изменено на 2\n-если в числовой матрице S есть значение больше модуля числа 7, то это значение в матрице Т будет изменено на 0");
                        
                        
                        // Создание матрицы Т

                        for (let i = 0; i < m; i++) {
                            martixT[i] = [];
                        }

                        let i = 0;
                        let j = 0;
                        while (i <= n && j < m) {
                            if (numberMatrix[j][i] == 1) {
                                martixT[j][i] = - 5;
                                i++;
                            } else if (numberMatrix[j][i] == -3) {
                                martixT[j][i] = 2;
                                i++;
                            } else if (Math.abs(numberMatrix[j][i]) > 7) {
                                martixT[j][i] = 0;
                                i++;
                            } else if (i < n) {
                                martixT[j][i] = numberMatrix[j][i];
                                i++;
                            } else {
                                i = 0;
                                j++;
                            } 
                        }

                        // Вывод результата по матрице Т

                        let resultT = "";
                        for (let i = 0; i < m; i++) {
                            resultT += martixT[i].join() + "<br>";
                        }
                        
                        document.write(`<br>Создана матрица Т на основе матрицы S, с заменой элементов по условию:<br> ${resultT}`);
                        alert("Матрица Т создана!\nДалее на основе матрицы T мы создадим матрицу TT. Значения не будут изменены, но изменится их порядок - они будут расположены по\
 возрастанию построчно, при помощи пузырькового метода сортировки.");
                        

                        // Создание матрицы TT и ее сортировка

                        let matrixTT = martixT.slice();

                        for (let i = 0; i < m; i++) {
                            for (let j = 0; j < matrixTT[i].length; j++) {
                                if (matrixTT[i][j] > matrixTT[i][j + 1]) {
                                    let step = matrixTT[i][j];
                                    matrixTT[i][j] = matrixTT[i][j + 1];
                                    matrixTT[i][j + 1] = step;
                                    j = -1;
                                }
                            }
                        }

                        // Вывод результата по матрице ТТ

                        let resultTT = "";
                        for (let i = 0; i < m; i++) {
                            resultTT += matrixTT[i].join() + "<br>";
                        }
                        
                        document.write(`<br>Создана матрица ТT на основе матрицы T, с сортировкой по возрастанию пузырьковым методом:<br> ${resultTT}`);
                        alert("Матрица ТТ создана!\nДалее на основе матрицы TТ мы создадим результирующую матрицу R. Данную матрицу мы получим в результате вычитания из каждого элемента матрицы S\
, алгебраической суммы элементов соответствующего столбца матрицы ТТ.");

                        // Создание результирующей матрицы R 
 
                        for (let i = 0; i < m; i++) {
                                matrixR[i] = [];
                            }

                        for (let i = 0; i < n; i++) {
                            for (let j = 0; j < m; j++) {
                                let sum = 0;
                                let k = 0;
                                while (k < m) {
                                    sum += matrixTT[k][i];
                                    k++;
                                    }         
                                matrixR[j][i] = numberMatrix[j][i] - sum;
                                }
                            }
                        
                        // Вывод результата по матрице R

                        let resultR = "";
                        for (let i = 0; i < m; i++) {
                        resultR += matrixR[i].join() + "<br>";
                        }

                        document.write(`<br>Создана результирующая матрица R:<br>${resultR}`)
                        alert("Результирующая матрица R создана!\nРабота завершена!\nРезультаты будут отображены в документе :)");

                    </script>
            </body>
    </head>
</html>