<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
            <body>
                <title>Задание № 8.4</title>
                <script>

                    "use strict"

                    // Приветствие

                    alert("В данном задании будет вычислен корень нелинейного уравнения F(x) = 3x - sin(x) - 7.\
                    \nВычисление будет произведено методом половинного деления.\
                    \nДля вычисления нужно задать предполагаемые интервалы значений, где будет произведен поиск корня функции. Вычисление будет произведено с заданной точностью вычисления в 0.0001\
                    \nПомните что минимальное значение А не может быть больше значения B.");

                     // Ввод значений интервала и проверка значений

                    let a = +prompt("Введите значение для интервала А:");
                    let b = +prompt("Введите значение для интервала B:");

                    checkRootEquation(a,b);

                    function checkRootEquation (a,b) {
                        let check = (3 * a - Math.sin(a) - 7) * (3 * b - Math.sin(b) - 7);
                        if (check < 0) {
                            alert("В заданном интервале возможно найти корень уравнения! На следующем шаге произойдет его вычисление.");
                        } else {
                            alert("В заданном интервале невозможно найти корень уравнения! Или же заданы некорректные значения.");
                            let reload = confirm("Перезапустить программу?");
                            if (reload == true) {
                                location.reload();
                            } else {
                                location.close();
                                };
                            }
                    }

                    // Нахождение корня уравнения
                     
                    function calcRootEquation (a, b) {
                        let c = (a + b) / 2;
                        let expo1 = (3 * b - Math.sin(b) - 7) * (3 * c - Math.sin(c) - 7);
                        if (expo1 < 0) {
                            a = c;
                        }

                        c = (a + b) / 2;
                        let expo2 = (3 * a - Math.sin(a) - 7) * (3 * c - Math.sin(c) - 7);
                            if (expo2 < 0) {
                                b = c;
                            }

                            if (b - a < 0.0001) {
                                let result = (a + b) / 2;
                                return result; 
                            } else {
                                return(calcRootEquation(a,b));
                            }
                        }

                        let root = +calcRootEquation(a, b).toFixed(4);

                        alert(`Вычислен корень уравнения - ${root}\nДалее будет вычислен результат уравнения F(x) = 3x - sin(x) - 7, где корень уравнения ${root} будет равен х.\
                        \nЕсли результат уравнения будет меньше точности вычисления в 0.0001, то корень уравнения вычислен верно.`);

                        // Проверка корня уравнения и вывод результата

                        let check = 3 * root - Math.sin(root) - 7;

                        if (check < 0.0001) {
                            alert(`Поскольку результат уравнения ${check.toFixed(4)} меньше заданной точности в 0.0001, то корень уравнения вычислен верно!\
                            \nПроверка пройдена!`);
                        } else {
                            alert(`Результат уравнения ${check.toFixed(4)} больше заданной точности в 0.0001.\nПроверка не пройдена!\nРекомендуется перезапустить программу!`);
                        }

                </script>
            </body>
    </head>
</html>